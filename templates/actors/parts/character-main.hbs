<div class="abilities-scores section-container">
    <div class="section-header">
        <h4>{{localize "CO.label.long.abilities"}}</h4>
        <div class="attacks-controls controls">
        {{#if unlocked}}
        <a class="abilities-edit" data-tooltip="Editez vos caractéristiques" data-action="edit-ability-scores"><i class="fas fa-fw fa-edit"></i></a>
        {{/if}}
        </div>
    </div>
    <!-- ABILITY MODIFIERS -->
    <div class="section-body">
        <ol class="ability-scores">
            {{#each abilities as |ability id|}}
            {{!log (concat "Chroniques Oubliées | " id) ability}}
                <li class="ability key" data-ability="{{id}}">
                    <label class="details-label ability-name">{{localize (concat 'CO.abilities.long.' id)}}</label>
                    <h2 class="ability-id">
                        {{localize (concat "CO.abilities.short." id)}}
                        {{#if ability.superior}}<i class="fas fa-asterisk"></i>{{/if}}
                    </h2>
                    <h3 class="ability-mod rollable" data-rolling="@abilities.{{id}}" data-tooltip="{{ability.tooltipValue}}" data-roll-type="skillcheck" >{{numberFormat ability.value decimals=0 sign=true}}</h3>
                </li>
            {{/each}}
        </ol>
    </div>
</div>

<div class="features section-container">
    <div class="section-header">
        <h4>{{localize "CO.label.long.profile"}} & {{localize "CO.ui.features"}}</h4>
    </div>
    <!-- PROFILS & FEATURES-->
    <div class="section-body-no-flex">
        <ol class="features-container items-container">
            <ol class="item-list">
                {{#each profiles as |item id|}}
                    <li class="item flexrow" data-item-uuid="{{item.uuid}}" data-item-id="{{item._id}}" data-item-type="{{item.type}}" draggable="false">
                        <div class="item-name flexrow">
                            <div class="item-image" style="background-image: url('{{item.img}}')"></div>
                            <h4><a class="item-control item-edit">{{item.name}}</a></h4>
                        </div>
                        <div class="item-controls-2">
                        {{#if ../unlocked}}
                            <a class="item-control item-delete" data-tooltip={{localize "CO.ui.remove"}}><i class="fas fa-trash"></i></a>
                        {{/if}}
                        </div>
                    </li>
                {{/each}}
                {{#each features as |item id|}}
                    <li class="item flexrow" data-item-uuid="{{item.uuid}}" data-item-id="{{item._id}}" data-item-type="{{item.type}}" draggable="false">
                        <div class="item-name flexrow">
                            <div class="item-image" style="background-image: url('{{item.img}}')"></div>
                            <h4><a class="item-control item-edit">{{item.name}}</a></h4>
                        </div>
                        <div class="item-controls-2">
                        {{#if ../unlocked}}
                            <a class="item-control item-delete" data-tooltip={{localize "CO.ui.remove"}}><i class="fas fa-trash"></i></a>
                        {{/if}}
                        </div>
                    </li>
                {{/each}}
            </ol>
        </ol>
    </div>
</div>

<div class="actions section-container">
    <div class="section-header">
        <h4>{{localize "CO.ui.actions"}}</h4>
        <div class="actions-controls controls"></div>
    </div>
    <!-- ACTIONS -->
    <div class="section-body-no-flex">
        <ol class="actions-container items-container">
            <ol class="item-list">
                {{#each visibleActivableActions as |action id|}}
                {{log (concat "Chroniques Oubliées | action " id) action}}
                        <li class="item flexrow action"  draggable="true" data-item-uuid="{{action.source}}" data-source="{{action.source}}" data-indice="{{action.indice}}"   {{#if action.properties.temporary}}{{#unless action.properties.enabled}}style="opacity: 60%"{{/unless}}{{/if}}>
                            <div class="item-name flexrow">
                                <div class="item-image" style="background-image: url('{{{actionImg}}}')"></div>
                                <h4><a class="item-control item-edit">{{action.itemName}} : {{action.label}}</a>&nbsp;{{{action.icon}}}</h4>
                            </div>
                            <div class="item-controls-3">
                                {{#if action.properties.activable}}
                                    {{#if action.properties.temporary}}
                                        <a class="item-control item-activate" >
                                            {{#if action.properties.enabled}}
                                                <i class="fas fa-dice-d20 green toggle-action" style="font-size:16px" data-tooltip="Désactiver" data-action="unactivate" data-source="{{action.source}}" data-indice="{{action.indice}}"></i>
                                            {{else}}
                                                <i class="fas fa-dice-d20 gray toggle-action" style="font-size:16px" data-tooltip="Activer" data-action="activate" data-source="{{action.source}}" data-indice="{{action.indice}}"></i>
                                            {{/if}}
                                        </a>
                                    {{else}}
                                        {{#if (or (eq action.type 'melee') (eq action.type 'ranged'))}}
                                            <a class="item-control">
                                                <i class="fas fa-dice-d20 green toggle-action" style="font-size:16px" data-tooltip="Attaque" data-action="activate" data-type="attack" data-source="{{action.source}}" data-indice="{{action.indice}}"></i>
                                            </a> 
                                            <a class="item-control">
                                                <i class="fa-regular fa-hand-back-fist green toggle-action" style="font-size:16px" data-tooltip="Dommages" data-action="activate" data-type="damage" data-source="{{action.source}}" data-indice="{{action.indice}}"></i>
                                            </a> 
                                        {{else}}
                                        <a class="item-control">
                                            <i class="fa-solid green fa-sword toggle-action" style="font-size:16px" data-tooltip="Utiliser" data-action="activate" data-source="{{action.source}}" data-indice="{{action.indice}}"></i>
                                        </a>     
                                        {{/if}}             
                                    {{/if}}
                                {{/if}}
                                <a class="item-chat chat" data-tooltip="Envoyer dans le chat"  data-chat-type="action" data-indice="{{action.indice}}" data-source="{{action.source}}"><i class="fas fa-fw fa-comment-alt"></i></a>
                            </div>
                        </li>
                {{/each}}
            </ol>
        </ol>
    </div>
</div>