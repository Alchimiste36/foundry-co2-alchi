{{!log "Chroniques Oubliées | character paths" this}}

{{#if (lt xpleft 0)}}
    <div class="notification error permanent">
        {{ localize "CO.notif.TooMuchSpentXP" }}&nbsp;(<b>Total : </b>{{xpleft}})
    </div>
{{else}}
    {{#if (gt xpleft 0)}}
        <div class="notification info permanent">
            {{ localize "CO.notif.XPLeftToSpend" }}&nbsp;(<b>Total : </b>{{xpleft}})
        </div>
    {{/if}}
{{/if}}

<!-- Capacités hors voies -->
{{> "systems/co/templates/actors/parts/paths/character-capacities.hbs"}}

{{#each pathGroups as |pg id|}}
    {{log 'pathGroup' pg id}}
    <ol class="paths items-container" data-tab="features">
        <li class="items-container-header flexrow">
            <h3 class="item-name flexrow">
                <a class="section-toggle">{{pg.path.name}} ({{pg.path.system.rank}})</a>
            </h3>
            <div class="item-controls-3 item" data-item-id="{{pg.path.id}}">
                {{#if ../unlocked}}
                    <a class="item-edit edit" data-tooltip="{{localize 'CO.label.long.edit'}}"><i class="fas fa-fw fa-edit"></i></a>
                    <a class="item-control path-delete" data-tooltip={{localize "CO.ui.remove" }}><i class="fas fa-trash"></i></a>
                {{/if}}
            </div>
        </li>
        <ol class="item-list foldable">
            {{#each pg.items as |capacity id|}}
                {{#if capacity.system.learned}}
                    <li class="item flexrow" data-item-id="{{capacity._id}}" data-item-type="capacity" draggable="false">
                        <div class="item-detail">{{add id 1}}</div>
                        <div class="item-name flexrow">
                            <div class="item-image" style="background-image: url('{{capacity.img}}')"></div>
                            <h4><a class="item-control item-edit">{{capacity.name}}</a></h4>
                        </div>
                        <div class="item-controls-3">
                            <a class="item-chat chat" data-tooltip="{{localize 'CO.label.long.sendToChat'}}" data-chat-type="item"><i class="fas fa-fw fa-comment-alt"></i></a>
                            {{#if @root.unlocked}}
                                <a class="item-edit edit" data-tooltip="{{localize 'CO.label.long.edit'}}"><i class="fas fa-fw fa-edit"></i></a>
                                <a class="item-control capacity-learn" data-tooltip="{{localize 'CO.ui.unbuy'}}"><i class="fa-solid green fa-check" style="font-size:16px"></i></a>
                            {{/if}}
                        </div>
                    </li>
                {{else}}
                    {{#if @root.unlocked}}
                        <li class="item flexrow" data-item-id="{{capacity._id}}" data-item-type="capacity" draggable="false" style="opacity: 60%">
                            <div class="item-detail">{{add id 1}}</div>
                            <div class="item-name flexrow">
                                <div class="item-image" style="background-image: url('{{capacity.img}}')"></div>
                                <h4><a class="item-control item-edit" data-tooltip="{{localize 'CO.notif.unknownCapacity'}}">{{capacity.name}}</a></h4>
                            </div>
                            <div class="item-controls-2">
                                <a class="item-edit edit" data-tooltip="{{localize 'CO.label.long.edit'}}"><i class="fas fa-fw fa-edit"></i></a>
                                <a class="item-control capacity-learn" data-tooltip="{{localize 'CO.ui.buy'}}"><i class="fa-solid gray fa-check" style="font-size:16px"></i></a>
                            </div>
                        </li>
                    {{/if}}
                {{/if}}
            {{/each}}
        </ol>
    </ol>
{{/each}}