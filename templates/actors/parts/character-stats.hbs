<div class="stats-layout">
    <div class="stats-layout-top flexrow">
        <div class="stats-layout-topleft flex1">
            <div class="abilities-container">
                <div class="cell">
                    <span class="field-label header">{{localize "CO.label.short.superior"}}</span>
                </div>
                <div class="cell">
                    <span class="field-label header">{{localize "CO.label.short.stat"}}</span>
                </div>
                <div class="cell">
                    <span class="field-label header">{{localize "CO.label.short.base"}}</span>
                </div>
                <div class="cell">
                    <span class="field-label header">{{localize "CO.label.short.bonus"}}</span>
                </div>
                <div class="cell">
                    <span class="field-label header">{{localize "CO.label.short.value"}}</span>
                </div>
                <div class="cell">
                    <span class="field-label header">{{localize "CO.label.short.mod"}}</span>
                </div>
                <div class="cell"></div>
                {{#each abilities as |ability id|}}
                    {{!log (concat "Chroniques Oubliées | " id) ability}}
                    <div class="cell" title="Supérieur (2d20)">
                        <input type="checkbox" name="system.abilities.{{id}}.superior" {{checked ability.superior}} />
                    </div>
                    <div class="cell">
                        <span class="field-label header" title="{{localize (concat 'CO.abilities.long.' id)}}">{{localize (concat "CO.abilities.short." id)}}</span>
                    </div>
                    <div class="cell">
                        <input class="field-value" name="system.abilities.{{id}}.base" type="string" value="{{ability.base}}" data-dtype="Number" />
                    </div>
                    <div class="cell">
                        <input
                                class="field-value"
                                name="system.abilities.{{id}}.bonuses.sheet"
                                type="string"
                                value="{{numberFormat ability.bonuses.sheet decimals=0 sign=true}}"
                                data-dtype="Number"
                        />
                    </div>
                    <div class="cell readonly">
                        <input
                                class="field-value"
                                name="system.abilities.{{id}}.value"
                                type="string"
                                readonly="true"
                                value="{{ability.value}}"
                                data-dtype="Number"
                                data-tooltip="{{ability.tooltip}}"
                        />
                    </div>
                    <div class="cell readonly">
                        <input class="field-value" name="system.abilities.{{id}}.mod" readonly="true" type="string" value="{{numberFormat ability.mod decimals=0 sign=true}}" data-dtype="Number" />
                    </div>
                    <div class="cell">
                        <a class="field-label header rollable" data-rolling="@abilities.{{id}}" data-roll-type="skillcheck"><i class="fas fa-dice-d20"></i></a>
                    </div>
                {{/each}}
            </div>
        </div>
        <div class="stats-layout-topright flex1">
            <div class="combat-container">
                <div class="cell"></div>
                <div class="cell">
                    <span class="field-label header">{{localize "CO.label.short.base"}}</span>
                </div>
                <div class="cell">
                    <span class="field-label header">{{localize "CO.label.short.bonus"}}</span>
                </div>
                <div class="cell">
                    <span class="field-label header">{{localize "CO.label.short.value"}}</span>
                </div>
                <div class="cell">
                    <span class="field-label header">{{localize "CO.label.short.mod"}}</span>
                </div>
                <div class="cell"></div>
                {{#each combat as |field id|}}
                    {{!log (concat "Chroniques Oubliées | combat " id) field}}
                    <div class="cell">
                        <span class="field-label header" title="{{localize (concat 'CO.combat.long.' id)}}">{{localize (concat "CO.combat.short." id)}}</span>
                    </div>
                    <div class="cell">
                        {{#if field.mod}}
                            <input
                                    class="field-value"
                                    name="system.combat.{{id}}.base"
                                    readonly="true"
                                    type="string"
                                    value="{{numberFormat field.base decimals=0 sign=true}}"
                                    data-dtype="Number"
                                    data-tooltip="{{field.tooltipBase}}"
                            />
                        {{else}}
                            <input class="field-value" name="system.combat.{{id}}.base" readonly="true" type="string" value="{{field.base}}" data-dtype="Number" data-tooltip="{{field.tooltipBase}}" />
                        {{/if}}
                    </div>
                    <div class="cell">
                        <input class="field-value" name="system.combat.{{id}}.bonuses.sheet" type="string" value="{{numberFormat field.bonuses.sheet decimals=0 sign=true}}" data-dtype="Number" />
                    </div>
                    <div class="cell readonly">
                        {{#if field.value}}
                            <input
                                    class="field-value"
                                    name="system.combat.{{id}}.value"
                                    readonly="true"
                                    type="string"
                                    value="{{field.value}}"
                                    data-dtype="Number"
                                    data-tooltip="{{field.tooltipValue}}"
                            />
                        {{/if}}
                    </div>
                    <div class="cell readonly">
                        {{#if field.mod}}
                            <input
                                    class="field-value"
                                    name="system.combat.{{id}}.mod"
                                    readonly="true"
                                    type="string"
                                    value="{{numberFormat field.mod decimals=0 sign=true}}"
                                    data-dtype="Number"
                                    data-tooltip="{{field.tooltipMod}}"
                            />
                        {{/if}}
                    </div>
                    <div class="cell">
                        {{#if field.mod}}
                            <a class="field-label header rollable" data-rolling="@combat.{{id}}" data-roll-type="combatcheck"><i class="fas fa-dice-d20"></i></a>
                        {{/if}}
                    </div>
                {{/each}}
            </div>
        </div>
    </div>
    <div class="stats-layout-middle flexrow">
        <div class="stats-layout-middleleft flex1">
            <div class="resources-container">
                <div class="cell"></div>
                <div class="cell">
                    <span class="field-label header">{{localize "CO.label.short.base"}}</span>
                </div>
                <div class="cell">
                    <span class="field-label header">{{localize "CO.label.short.bonus"}}</span>
                </div>
                <div class="cell">
                    <span class="field-label header">{{localize "CO.label.short.max"}}</span>
                </div>
                <div class="cell">
                    <span class="field-label header">{{localize "CO.label.short.value"}}</span>
                </div>
                <div class="cell"></div>
                {{#each resources as |field id|}}
                    {{!log (concat "Chroniques Oubliées | " id) field}}
                    {{#if (isset field.label)}}
                    {{else}}
                        <div class="cell">
                            <span class="field-label header" title="{{localize (concat 'CO.resources.long.' id)}}">{{localize (concat "CO.resources.short." id)}}</span>
                        </div>
                        <div class="cell">
                            <input class="field-value" name="system.resources.{{id}}.base" readonly="true" type="string" value="{{field.base}}" data-dtype="Number" />
                        </div>
                        <div class="cell">
                            <input class="field-value" name="system.resources.{{id}}.bonuses.sheet" type="string" value="{{numberFormat field.bonuses.sheet decimals=0 sign=true}}" data-dtype="Number" />
                        </div>
                        <div class="cell readonly">
                            <input class="field-value" name="system.resources.{{id}}.max" readonly="true" type="string" value="{{field.max}}" data-dtype="Number" />
                        </div>
                        <div class="cell">
                            <input class="field-value" name="system.resources.{{id}}.value" type="string" value="{{field.value}}" data-dtype="Number" />
                        </div>
                        <div class="cell"></div>
                    {{/if}}
                {{/each}}
            </div>
        </div>
        <div class="stats-layout-middleright flex1">
            <div class="resources-container">
                <div class="cell">
                    <span class="field-label header">{{localize "CO.label.short.label"}}</span>
                </div>
                <div class="cell">
                    <span class="field-label header">{{localize "CO.label.short.base"}}</span>
                </div>
                <div class="cell">
                    <span class="field-label header">{{localize "CO.label.short.bonus"}}</span>
                </div>
                <div class="cell">
                    <span class="field-label header">{{localize "CO.label.short.max"}}</span>
                </div>
                <div class="cell">
                    <span class="field-label header">{{localize "CO.label.short.value"}}</span>
                </div>
                <div class="cell"></div>
                {{#each resources as |field id|}}
                    {{!log (concat "Chroniques Oubliées | " id) field}}
                    {{#if (isset field.label)}}
                        <div class="cell">
                            <input class="field-value" name="system.resources.{{id}}.label" type="string" value="{{field.label}}" data-dtype="String" />
                        </div>
                        <div class="cell">
                            <input class="field-value" name="system.resources.{{id}}.base" readonly="true" type="string" value="{{field.base}}" data-dtype="Number" />
                        </div>
                        <div class="cell">
                            <input class="field-value" name="system.resources.{{id}}.bonuses.sheet" type="string" value="{{numberFormat field.bonuses.sheet decimals=0 sign=true}}" data-dtype="Number" />
                        </div>
                        <div class="cell readonly">
                            <input class="field-value" name="system.resources.{{id}}.max" readonly="true" type="string" value="{{field.max}}" data-dtype="Number" />
                        </div>
                        <div class="cell">
                            <input class="field-value" name="system.resources.{{id}}.value" type="string" value="{{field.value}}" data-dtype="Number" />
                        </div>
                        <div class="cell"></div>
                    {{/if}}
                {{/each}}
            </div>
        </div>
    </div>
    <div class="stats-layout-bottom flexrow">
        <div class="stats-layout-bottomleft flex1">
            <div class="hp-container">
                <div class="cell" style="grid-column:1; grid-row:1/ span 2; justify-self: start; align-self: center"><span class="field-label darkslate" title="{{localize "CO.label.long.hp" }}" style="font-size: 60px"><i class="fa-solid fa-heart-pulse"></i></span></div>
                <div class="cell darkslate" style="grid-column:2; grid-row:1; justify-self: start; align-self: center">Current</div>
                <div class="cell" style="grid-column:3; grid-row:1; justify-self: center; align-self: center">
                    <input class="field-value" name="system.attributes.hp.base" type="hidden" value="{{attributes.hp.base}}" data-dtype="Number"/>
                    <input class="field-value sans" name="system.attributes.hp.value" type="text" value="{{attributes.hp.value}}" data-dtype="Number"/>
                </div>
                <div class="cell darkslate" style="grid-column:2; grid-row:2; justify-self: start; align-self: center">Total</div>
                <div class="cell" style="grid-column:3; grid-row:2; justify-self: center; align-self: center"><input class="field-value sans" name="system.attributes.hp.max" type="text" value="{{attributes.hp.max}}" data-dtype="Number" data-tooltip="{{attributes.hp.tooltip}}"/></div>
            </div>
        </div>
        <div class="stats-layout-bottomright flex2"></div>
    </div>
</div>

