{{!-- Character Inventory Tab Template --}}
{{log "Chroniques Oubliées | Character inventory" this}}
<section class="tab standard-form inventory{{#if tabs.inventory.active}} active{{/if}}" data-group="primary" data-tab="inventory">

<!-- Currencies -->
<ol class="items-container" data-tab="inventory">
  <li class="items-container-header flexrow">
    <h4 class="item-name flexrow"><a data-action="toggleSection">{{localize "CO.ui.richness"}}</a></h4>
  </li>
  <div class="flexrow foldable">
    {{#each system.wealth as |currency id|}}
      <div class="flexrow">
        <label>{{localize (concat 'CO.currency.' id)}} : </label>
        <input class="current center" type="number" name="system.wealth.{{id}}.value" value="{{currency.value}}" data-dtype="Number" placeholder="0" />
      </div>
    {{/each}}
  </div>
</ol>

{{#each inventory as |items category|}}
  {{log "Chroniques Oubliées | inventory group" items category}}
  <ol class="items-container" data-tab="inventory" data-category="{{category}}">
    <li class="items-container-header flexrow">
      <h4 class="item-name flexrow">
        <a data-action="toggleSection">{{localize (concat "CO.ui." category)}}</a>
      </h4>
      <div class="item-detail">{{localize "CO.ui.usage"}}</div>
      <div class="item-detail">{{localize "CO.label.short.quantity"}}</div>
      {{#if @root.editable}}
        <div class="item-detail">{{localize "CO.ui.actions"}}</div>
        <div class="item-controls-2">
          <a class="item-control" data-action="createItem" data-type="equipment" data-subtype="{{category}}" data-tooltip="{{localize 'CO.label.long.add'}}"><i class="fas fa-plus"></i></a>
        </div>
      {{/if}}
    </li>
    <ol class="item-list foldable">
      {{#each items as |item id|}}
        {{!log 'Character inventory item' item}}
        <li class="item flexrow" data-item-uuid="{{item.uuid}}" data-item-id="{{item._id}}" data-item-type="{{item.type}}" draggable="true">
          <div class="item-name flexrow">
            <a class="item-img" data-action="editItem" style="background-image: url('{{item.img}}')"></a>
            <h4>{{item.name}}
                {{#if item.system.isWeapon}}{{{isTrainedWithWeapon @root.actor item._id}}}{{/if}}
                {{#if item.system.isArmor}}{{{isTrainedWithArmor @root.actor item._id}}}{{/if}}
                {{#if item.system.isShield}}{{{isTrainedWithShield @root.actor item._id}}}{{/if}}
              </h4>
          </div>
          <div class="item-detail">
            <a class="item-control inventory-usage">
              {{#if system.usage.twoHand}}
                <i class="fas fa-hand-paper"></i><i class="fas fa-hand-paper"></i>
              {{else}}
                {{#if system.usage.oneHand}}
                  <i class="fas fa-hand-paper"></i>
                {{/if}}
              {{/if}}
            </a>
          </div>
          <div class="item-detail">
            <a class="item-control inventory-qty" data-tooltip="{{localize 'CO.label.short.quantity'}}">{{item.system.quantity.current}}</a>
          </div>
          {{#if @root.editable}}
            <div class="item-detail">
              {{#if item.system.properties.equipable}}
                {{#if item.system.equipped}}
                  <a class="item-control" data-action="inventoryEquip" data-tooltip="{{localize 'CO.action.unequip'}}"><i class="fa-solid fa-shield"></i></a>
                {{else}}
                  <a class="item-control" data-action="inventoryEquip" data-tooltip="{{localize 'CO.action.equip'}}"><i class="fa-regular fa-shield"></i></a>
                {{/if}}
              {{/if}}
              {{#if (and item.system.properties.reloadable (gt item.system.quantity.current 0))}}
                <a class="item-control inventory-consume" data-tooltip="{{localize 'CO.action.consume'}}"><i class="fas fa-drumstick-bite"></i></a>
              {{/if}}
            </div>
            <div class="item-controls-2">
              <a class="chat" data-action="sendToChat" data-chat-type="item" data-tooltip="{{localize 'CO.label.long.sendToChat'}}"><i class="fas fa-fw fa-comment-alt"></i></a>
              {{#if @root/unlocked}}
                <a class="item-edit" data-action="editItem" data-tooltip="{{localize 'CO.label.long.edit'}}"><i class="fas fa-fw fa-edit"></i></a>
                <a class="item-control" data-action="deleteItem" data-tooltip="{{localize 'CO.ui.remove'}}"><i class="fas fa-trash"></i></a>
              {{/if}}
            </div>
          {{/if}}
        </li>
      {{/each}}
    </ol>
  </ol>
{{/each}}

</section>
