{{log "Chroniques Oubli√©es | Encounter sidebar" this}}
<div class="sheet-sidebar">
  <div class="scrollable">
    <!-- INIT -->
    <div class="sidebar-section init-section">
      <div class="sidebar-section-header">
        <div class="sidebar-label init-label">
          <h4>{{localize "CO.label.long.init"}}</h4>
        </div>
        <div class="init-value labelled-field" data-tooltip="{{combat.init.tooltipValue}}">
          <i class="fas fa-solid fa-swords fa-fw"></i>
          {{combat.init.value}}
        </div>
      </div>
      {{#if unlocked}}
        <div class="sidebar-section-content">
          <div class="labelled-field" data-tooltip="{{localize 'CO.label.long.base'}}">
            <input class="init-base" type="number" name="system.combat.init.base" value="{{combat.init.base}}" data-dtype="Number" placeholder="0" />
          </div>
        </div>
        <div class="sidebar-section-content">
          <div class="labelled-field" data-tooltip="{{localize 'CO.label.long.bonus'}}">
            <input
              class="init-bonus"
              type="text"
              name="system.combat.init.bonuses.sheet"
              value="{{numberFormat combat.init.bonuses.sheet decimals=0 sign=true}}"
              data-dtype="Number"
              placeholder="0"
            />
          </div>
        </div>
      {{/if}}
    </div>

    <!-- DEF -->
    <div class="sidebar-section armor-section">
      <div class="sidebar-section-header">
        <div class="sidebar-label armor-label">
          <h4>{{localize "CO.label.long.def"}}</h4>
        </div>
        <div class="armor-base labelled-field" data-tooltip="{{combat.def.tooltipValue}}">
          <i class="fas fa-fw fa-shield-alt"></i>
          {{combat.def.value}}
        </div>
      </div>
      {{#if unlocked}}
        <div class="sidebar-section-content">
          <div class="labelled-field" data-tooltip="{{localize 'CO.label.long.base'}}">
            <input
              class="def-base"
              type="number"
              name="system.combat.def.base"
              value="{{combat.def.base}}"
              data-dtype="Number"
              placeholder="0"
              data-tooltip="{{combat.def.tooltipBase}}"
            />
          </div>
        </div>
        <div class="sidebar-section-content">
          <div class="labelled-field" data-tooltip="{{localize 'CO.label.long.bonus'}}">
            <input
              class="def-bonus"
              type="text"
              name="system.combat.def.bonuses.sheet"
              value="{{numberFormat combat.def.bonuses.sheet decimals=0 sign=true}}"
              data-dtype="Number"
              placeholder="0"
            />
          </div>
        </div>
      {{/if}}
    </div>

    <!-- DR -->
    <div class="sidebar-section dr-section">
      <div class="sidebar-section-header">
        <div class="sidebar-label dr-label">
          <h4>{{localize "CO.ui.dr"}}</h4>
        </div>
        <div class="dr-base labelled-field" data-tooltip="{{combat.dr.tooltipValue}}">
          <i class="fas fa-fw fa-universal-access"></i>
          {{combat.dr.value}}
        </div>
      </div>
      {{#if unlocked}}
        <div class="sidebar-section-content">
          <div class="field">
            <input
              class="dr-base"
              type="number"
              name="system.combat.dr.base"
              value="{{combat.dr.base}}"
              data-dtype="Number"
              placeholder="0"
              readonly
              data-tooltip="{{combat.dr.tooltipBase}}"
            />
            <span class="slash">/</span>
            <input
              class="dr-bonus"
              type="text"
              name="system.combat.dr.bonuses.sheet"
              value="{{numberFormat combat.dr.bonuses.sheet decimals=0 sign=true}}"
              data-dtype="Number"
              placeholder="0"
              data-tooltip="{{localize 'CO.label.long.bonus'}}"
            />
          </div>
        </div>
      {{/if}}
    </div>

    <!-- HP -->
    <div class="sidebar-section health-section">
      <div class="sidebar-section-header">
        <div class="sidebar-label">
          <h4 data-tooltip="{{localize 'CO.label.long.hp'}}">{{localize "CO.label.short.hp"}}</h4>
        </div>
        <div class="hit-points labelled-field">
          <i class="fas fa-fw fa-heart"></i>
          <input class="current" name="system.attributes.hp.value" value="{{attributes.hp.value}}" type="number" data-dtype="Number" />
          <span class="slash">/</span>
          <span class="max" data-tooltip="{{attributes.hp.tooltip}}">{{attributes.hp.max}}</span>
        </div>
      </div>
      {{#if unlocked}}
        <div class="sidebar-section-content">
          <div class="field">
            <input
              class="hp-base"
              type="number"
              name="system.attributes.hp.base"
              value="{{attributes.hp.base}}"
              data-dtype="Number"
              data-tooltip="{{localize 'CO.label.long.base'}}"
            />
            <span class="slash">/</span>
            <input
              class="hp-bonus"
              type="text"
              name="system.attributes.hp.bonuses.sheet"
              value="{{numberFormat attributes.hp.bonuses.sheet decimals=0 sign=true}}"
              data-dtype="Number"
              placeholder="0"
              data-tooltip="{{localize 'CO.label.long.bonus'}}"
            />
          </div>
        </div>
      {{/if}}
    </div>

    <!-- Temp HP -->
    <div class="sidebar-section health-section">
      <div class="sidebar-section-header">
        <div class="sidebar-label">
          <h4 data-tooltip="{{localize 'CO.label.long.tempDm'}}">{{localize "CO.label.short.tempDm"}}</h4>
        </div>
        <div class="hit-points labelled-field">
          <i class="fas fa-fw fa-heart-broken"></i>
          <input class="temp-dm" name="system.attributes.tempDm" value="{{attributes.tempDm}}" type="number" data-dtype="Number" />
        </div>
      </div>
    </div>

    <!-- MOUVEMENT -->
    <div class="sidebar-section speed-section">
      <div class="sidebar-section-header">
        <div class="sidebar-label mvt-label">
          <i class="fas fa-fw fa-shoe-prints"></i>
          <h4>{{localize "CO.label.long.movement"}}</h4>
        </div>
        <div class="mvt-base labelled-field">
          {{attributes.movement.value}}&nbsp;{{attributes.movement.unit}}
        </div>
      </div>
      {{#if unlocked}}
        <div class="sidebar-section-content">
          <div class="mvt-base field">
            <input
              class="mvt-base"
              type="number"
              name="system.attributes.movement.base"
              value="{{attributes.movement.base}}"
              data-dtype="Number"
              placeholder="10"
              data-tooltip="{{localize 'CO.label.long.base'}}"
            />
            <input
              class="movement-bonus"
              type="text"
              name="system.attributes.movement.bonuses.sheet"
              value="{{numberFormat attributes.movement.bonuses.sheet decimals=0 sign=true}}"
              data-dtype="Number"
              data-tooltip="{{localize 'CO.label.long.bonus'}}"
              placeholder="+0"
            />
            <select name="system.attributes.movement.unit" data-type="String">
              {{selectOptions choiceMoveUnit selected=system.attributes.movement.unit localize=true}}
            </select>
          </div>
        </div>
      {{/if}}
    </div>
    <!-- STATE MODIFIERS -->
    <div class="sidebar-section speed-section">
      <div class="sidebar-section-header">
        <div class="sidebar-label">
          <h4>{{localize "CO.label.long.states"}}</h4>
        </div>
      </div>
      <div class="sidebar-section-content">
        <ul class="state-modifier">
          {{#each stateModifiers as |state|}}
            <li class="state-name"> {{state}}</li>
          {{/each}}
        </ul>
      </div>
    </div>
  </div>
</div>